{"poster":"IPressQyouQQ","date":"2017-02-01T22:24:00.502+0000","title":"Server side \"bursty\" lag not related to ping or FPS","subforum":"[ARCHIVED] Help & Support","up_votes":1,"down_votes":0,"body":"Hello,\r\n\r\nEver since the new patch I have had issues with lag. Now before I go into this I want to preface this discussion with the fact that I'm 900 MICROseconds from your servers. I live about a mile away and have a microwave connection into your data center. Its gigabit so not a bandwidth thing either.\r\n\r\nI have a Radeon 290x and my FPS is locked to my refresh rate and never drops below 60FPS. \r\n\r\nAnd yet in game there are times where I lag terribly. It almost feels like I'm dragging an anchor around that eventually whips back around at me. I feel like the server queues up a bunch of messages to send to me all at once. It seems to happen a lot around major actions in the game. For instance when there is a large teamfight I can feel my actions not respond for a second or two. This makes fights very \"bursty\". \r\n\r\nNow, nothing seems to pause/hang/freeze. Its all very smooth. But it just feels like something server side is choking. I primarily play Master Yi, not sure if that matters. I also have a Sandy Bridge-E processor which doesn't seem to be taxed very much during the game. Nor does my GPU really get taxed.","replies":[{"poster":"Porocles","date":"2017-02-01T23:06:09.941+0000","up_votes":1,"down_votes":0,"body":"You could be having more local problems that's hindering a strong connection to our game servers, even if you're super close.  You can run a [log reader](https://support.riotgames.com/hc/en-us/articles/209765743-Connection-Troubleshooting-Log-Reader) to know for sure, but I'm suspecting packet loss.  If that's the case, try out the [connection issues](https://support.riotgames.com/hc/en-us/articles/201752664-Troubleshooting-Connection-Issues) guide to see if it helps.  Your FPS should be independent from your connection, so wouldn't really be an impact.  Let me know what you find.","replies":[{"poster":"IPressQyouQQ","date":"2017-02-02T10:09:22.561+0000","up_votes":1,"down_votes":0,"body":"Oh bless you guys for making those logs CSV. Time to bust out awk! I will let you know what I find. Hold please.","replies":[{"poster":"IPressQyouQQ","date":"2017-02-02T10:41:33.458+0000","up_votes":2,"down_votes":0,"body":"It does seem to be packet loss. I went through all of my logs going back until roughly January 3rd, 2016. It seems like I have had issues with packet loss in the past. But this recent bout is pretty long standing. \n\nhttp://i.imgur.com/e5MRi3O.jpg\n\nApologies for the huge chart and not labeling my axis correctly. I threw this together quickly. The large spike at the end is January 27th's first game. Previously to that on January 26th and before it was fine. So it definitely seems to have started last Friday.\n\nThis is a graph of \"loss\" by the way. If you need me to chart anything else in these files let me know. \n\nAlso perhaps relevant to this conversation. I obsessively monitor my \"hops\" through my network with Smokeping. I do have some packet loss, no network is perfect. But if you look at the graph below from smokeping my average is less than 3/4ths of 1%. You can also see that this pattern happens during times when I have perfectly fine gameplay. So I really don't think my network is the cause here.\n\nLast 10 days of latency and packet loss going into Steadfast at 350 E. Cermak: http://i.imgur.com/45yrFiF.jpg\n\nLast 400 days of latency and packet loss going into Steadfast at 350 E. Cermak: http://i.imgur.com/NoL3FL4.jpg\n\nSo as you can see, my packet loss going back for more than a year is pretty low. Along with my latency. And if it were the cause, I would be having this problem long before January 27th. \n\nIf you provide me with a list of IPs you want me to monitor in smoke ping I can add them and see what my performance is to each hop to that IP. Just let me know. Hopefully we can figure out exactly where this is happening. Because again, I really don't think it is my ISP.","replies":[{"poster":"Porocles","date":"2017-02-02T16:16:20.574+0000","up_votes":1,"down_votes":0,"body":"Thanks for all of the info, I appreciate you taking the time to do that.  Were you able to go over each step of the connection guide?  Since you were able to verify packet loss, then it should help towards resolving that.  \n\nThe traceroute you ran doesn't tell me too much though, unfortunately.  If you want to get an overview of how your ISP is routing to our game servers, then downloading [WinMTR ](http://winmtr.net/winmtr-v0-92-now-available/)can offer more context.  Grab that and run a traceroute to:  104.160.131.1\n\nIt's possible that your ISP is taking a long way to get to use, which can cause both higher ping and potential packet loss.\n\nGrab your routing and the graphs and send it over to our tech team through a [support ticket](https://support.riotgames.com/hc/en-us/requests/new).  We'll continue working with you individually to see what's going on.   Hang tight!","replies":[{"poster":"IPressQyouQQ","date":"2017-02-14T00:20:12.870+0000","up_votes":1,"down_votes":0,"body":"Alright I ran WinMTR for ~10 minutes. In that 10 minutes it sent 600 packets to each node. I lost a total of 1 packet in 10 minutes. \n\nhttp://i.imgur.com/kkygMJ7.jpg","replies":[{"poster":"Porocles","date":"2017-02-16T16:39:34.560+0000","up_votes":1,"down_votes":0,"body":"Thanks for that!  Your routing looks pretty solid, so something else could be getting in the way.  If you haven't already, grab the information you've gathered here and hit us up in a [support ticket](https://support.riotgames.com/hc/en-us/requests/new).  Our tech team will continue helping out individually!  We'll get back to you!","replies":[]}]}]},{"poster":"IPressQyouQQ","date":"2017-02-02T11:33:42.307+0000","up_votes":1,"down_votes":0,"body":"Here is a ping session to a server in the datacenter referenced above during my last game. This is the results during a teamfight in which I experienced a burst of lag.\n\n64 bytes from *SNIP*.static.steadfastdns.net (*SNIP*): icmp_seq=471 ttl=57 time=0.950 ms\n64 bytes from *SNIP*.static.steadfastdns.net (*SNIP*): icmp_seq=472 ttl=57 time=1.11 ms\n64 bytes from *SNIP*.static.steadfastdns.net (*SNIP*): icmp_seq=473 ttl=57 time=1.08 ms\n64 bytes from *SNIP*.static.steadfastdns.net (*SNIP*): icmp_seq=474 ttl=57 time=0.995 ms\n64 bytes from *SNIP*.static.steadfastdns.net (*SNIP*): icmp_seq=475 ttl=57 time=1.02 ms\n64 bytes from *SNIP*.static.steadfastdns.net (*SNIP*): icmp_seq=476 ttl=57 time=1.03 ms\n64 bytes from *SNIP*.static.steadfastdns.net (*SNIP*): icmp_seq=477 ttl=57 time=0.998 ms\n64 bytes from *SNIP*.static.steadfastdns.net (*SNIP*): icmp_seq=478 ttl=57 time=0.975 ms\n64 bytes from *SNIP*.static.steadfastdns.net (*SNIP*): icmp_seq=479 ttl=57 time=0.973 ms\n64 bytes from *SNIP*.static.steadfastdns.net (*SNIP*): icmp_seq=480 ttl=57 time=0.973 ms\n64 bytes from *SNIP*.static.steadfastdns.net (*SNIP*): icmp_seq=481 ttl=57 time=1.00 ms\n64 bytes from *SNIP*.static.steadfastdns.net (*SNIP*): icmp_seq=482 ttl=57 time=0.986 ms\n64 bytes from *SNIP*.static.steadfastdns.net (*SNIP*): icmp_seq=483 ttl=57 time=0.998 ms","replies":[]}]}]}]}]}