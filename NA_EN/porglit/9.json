{"poster":"Porglit","date":"2019-09-14T18:59:11.766+0000","title":"Mathematically evaluating the chance of rolling that one tier 5 champ you really need","subforum":"Teamfight Tactics","up_votes":1,"down_votes":0,"body":"First off, this is going to be a nerdy post, but the TL;DR is at the bottom for those who don't like math. For other nerds, feel free to check my math to make sure this is legit.\n\nWith the increase in chance of rolling a tier 5 champ at level 9 in the recent patch from 10% to 12%, I started to wonder how many rolls I would need to make to have a specific chance of finding a specific tier 5 champion in all the rolls made.  This is of course dependent  upon level, but I wanted to see how it changed from level to level, and compare what it is now after 9.18 to what it was before 9.18.  For example, how many rolls would be needed to have a 10% chance of finding Swain?  How many would it take to have a 50% chance, or higher?  I want to know partly how much better this %10 -> %12 change actually is, and also how much these numbers will change with the introduction of Kai'Sa in 9.19.  This post is for those curious.\n\n-----------------------------------\n\n#**Explanation:**\nFor very lower percentages, it's easy to estimate the chance of rolling a specific champion by simply taking the chance of rolling that champ and multiplying it by the number of rolls you make.  But due to some maths, it gets very difficult to estimate with any accuracy at all for larger numbers of rolls.  Here's the equations and explanation I have (showing my work):\n\nWe're looking for a single specific champion to be rolled.  When doing this many times, we can **not **simply take the percent chance of getting it once, and multiply by the number of times you roll.  To see why not, we can simply take the example of a 80% chance to roll a champion.  Rolling it twice does not give us a 160% chance of rolling the champion.  Instead, we have to calculate it by looking at the chance that we roll it first, then add the chance if we roll it the second.  This equals .8 that you get it the first roll, but for the second roll you have to multiply the chance that the first roll didn't find the champion by the chance that the second will, or (.2*.8).  Adding these together means the chance is .96, or 96% chance you'll find the champion in 2 rolls.  The central takeaway from this is that the second roll has to multipled by (1-X), where X is the chance of rolling your champ.  If you roll three times, it gets even worse.  The first roll has the chance X, the second is X(1-X), and the third is X(1-X)(1-X).  These must all be added together.  You can see that the calculation this way gets complicated quickly.\n\nBut there's a faster way.  Instead of calculating the chance of getting the champion on each individual roll and then adding all the chances together, it's much easier to instead take a 100% chance and subtract the chance that you never roll the champion at all.  This makes our equation:\n\n1-C = (1-X)^R\n\nwhere X is the chance of rolling the a champion of that tier, C is the chance of getting the champion over all the rolls, and R is the number of rolls.  This is the backbone of our final equation, but it needs a couple changes before we put it to work.  First, the point of this whole endeavor is to find the number of rolls you can expect to need to find a champ with a certain percentage.  This means we want R.  However, R is the exponent, meaning we must take the log of both sides to pull down the exponent.  This gives us:\n\nR*Log(1-X) = Log(1-C).  Dividing gives:\n\nR = Log(1-C) / Log(1-x)\n\nThere are two more things to consider.  First, the chance of getting a SPECIFIC champion is only a portion of the chance of getting a champion of that tier.  If the chance of getting a tier 5 champion is 2%, but there are 7 tier 5 champions, then the actual percentage of getting Swain specifically is not .02, but rather .02 / 7 = .00286.  This means we must divide X by 7.  Also, each roll gives 5 cards, which means the number of rolls needed is 1/5 the calculation of rolling for each individual card.  \n##**This means our final equation is:**\n\n##**R = (Log(1-C) / Log(1-(X / 7))) / 5**\n\nThis is our workhorse.  With it, I want to calculate how much gold is expected for a number of different chances across different levels, and see what we find.\n\n--------------------------------\n#**Results:**\n\nThe practical numbers are in the following list.  I indicate the level you are when you roll and the percent chance you want to have to get the specific champion.  The result is the **amount of gold** (twice the number of rolls) you need to spend in order to have that percent chance of seeing your specific champion.  I'm calculating for a 10%, 25%, 50%, 75%, and 90% chance of any specific tier 5 unit at each of level 7-9.  I then compare the answers of what it used to be pre-9.18 to what it is now post 9.18, and then compare also with the new numbers needed with the upcoming introduction of Kai'Sa in 9.19.\n\nLevel 7 and 8 have identical drop rates before and after 9.18\n\nLevel 7 for 10% = 16 gold\nLevel 7 for 25% = 42 gold\nLevel 7 for 50% = 98 gold\nLevel 7 for 75% = 194 gold\nLevel 7 for 90% = 322 gold\n\nLevel 8 for 10% = 6 gold\nLevel 8 for 25% = 16 gold\nLevel 8 for 50% = 40 gold\nLevel 8 for 75% = 78 gold\nLevel 8 for 90% = 130 gold\n\n#**Pre-9.18**\nLevel 9 for 10% = 4 gold (actually gives around 14% chance, but one roll doesn't give you >10% chance)\nLevel 9 for 25% = 8 gold\nLevel 9 for 50% = 20 gold\nLevel 9 for 75% = 40 gold\nLevel 9 for 90% = 64 gold\n\n#**Now, (9.18)**\nLevel 9 for 10% = 4 gold (actually ~16%)\nLevel 9 for 25% = 8 gold (actually ~29%)\nLevel 9 for 50% = 16 gold\nLevel 9 for 75% = 32 gold\nLevel 9 for 90% = 54 gold\n\n**Comparing, we see that the difference in gold needed to have a particular chance of finding a particular champion is pretty close, with the same number needed for low percentages, and 2-5 rolls less needed for high percentages.**  But in 9.19, all these numbers change, as there will be 8 tier 5 champions.  The following will be the gold needed for the same percentages at the same levels AFTER Kai'Sa is released with 9.19:\n\n#**Post-Kai'Sa**\nLevel 7 for 10% = 18 gold (from 16)\nLevel 7 for 25% = 46 gold (from 42)\nLevel 7 for 50% = 112 gold (from 98)\nLevel 7 for 75% = 222 gold (from 194)\nLevel 7 for 90% = 368 gold (from 322)\n\nLevel 8 for 10% = 8 gold (from 6)\nLevel 8 for 25% = 20 gold (from 16)\nLevel 8 for 50% = 46 gold (from 40)\nLevel 8 for 75% = 90 gold (from 78)\nLevel 8 for 90% = 148 gold (from 130)\n\nLevel 9 for 10% = 4 gold (actually ~14%, from ~14% or ~16)\nLevel 9 for 25% = 8 gold (from 8, or actually ~29%)\nLevel 9 for 50% = 20 gold (from 20 or 16)\nLevel 9 for 75% = 38 gold (from 40 or 32)\nLevel 9 for 90% = 62 gold (from 64 or 54)\n\nComparing these, the levels for level 9 after Kai'Sa is released appear extremely close to the drop rates prior to the 9.18 update from 10% -> 12%.\n\n-----------------------------\n\n#TL;DR:\nCurrently, the chance of finding a specific tier 5 champion is identical at levels 7 and 8, and only slightly better than it was before at level 9.  After Kai'Sa is released, the chance of finding any specific tier 5 champion will be almost identical to pre-9.18 at level 9, as the extra character almost exactly cancels out the increase in chance of find a tier 5 champ.  **However, the chance of finding a specific tier 5 champion at levels 7 and 8 after Kai'Sa is released will be considerably lower.**","replies":[{"poster":"Porglit","date":"2019-09-15T03:27:03.277+0000","up_votes":1,"down_votes":0,"body":"Again, I agree.  But knowing the baseline helps us determine if that's how they do it.  Rather than simply saying \"I felt like that was a little more Kayles than usual\", you can compare with solid(ish) numbers.","replies":[{"poster":"SupportiveRebel","date":"2019-09-15T08:31:10.734+0000","up_votes":1,"down_votes":0,"body":"> [{quoted}](name=Porglit,realm=NA,application-id=RaE1aOE7,discussion-id=6EoxMEfw,comment-id=0002,timestamp=2019-09-15T03:27:03.277+0000)\n>\n> Again, I agree.  But knowing the baseline helps us determine if that's how they do it.  Rather than simply saying \"I felt like that was a little more Kayles than usual\", you can compare with solid(ish) numbers.\n\nDo you realize the amount of data that you'd need to create a valid set?  Waaaayyyy more than what is reasonable without data collection internal to the game.  I make assumptions simply because there is no good way for us to know, other than to infer based on what is easier for them to code, and keeping track the volume of extremely unlikely events.","replies":[]}]},{"poster":"Porglit","date":"2019-09-15T02:32:41.073+0000","up_votes":1,"down_votes":0,"body":"We may not know how they changed the equations, but these calculations are assuming they're as advertised.  I don't for a second believe they actually function this way, but these calculations do give us a picture of the baseline that they would then modify.  Regardless of modification, some trends would remain.  For example, 8 champs at 12% still results almost identically to 7 champs at 10%, even if they modify something behind the scenes.  There are still 8 after Kai'Sa is released, and that still makes a significant different for levels 7 and 8.\n\nIt also gives at least a ballpark idea of how much you actually have to spend.  To find a certain tier 5 champion at level 8, you should expect to spend ~50 gold just to have a half chance of seeing him.  While any modifications behind the scenes could change that specific number, you most certainly shouldn't expect to, say, see 2 within 30 gold.  If we know what the advertised baseline is, we can more easily evaluate reality compared to that, rather than just guessing.\n\nTake it or leave it.  The calculations were prompted by so many people saying things like \"I got SUPER UNLUCKY because I spent 30 gold and never got my Kayle!\"  In reality, 30 gold at level 7 doesn't even give 1/5 chance...","replies":[{"poster":"SupportiveRebel","date":"2019-09-15T02:55:17.754+0000","up_votes":1,"down_votes":0,"body":"The problem is, if it does use seeding, the numbers are still as advertised.....on the average....but in reality you might be \"rolling dead\" or \"rolling hot\" much more often, depending on your seed.  (In other words, the mean is consistent but the variance is much higher).  The interesting part is that variance actually matters more than the mean, for the purposes of consistently building a comp, so the way they programmed the rolls is vitally important to understanding how we should go about our comp construction strategy.","replies":[]}]},{"poster":"SupportiveRebel","date":"2019-09-15T02:13:09.651+0000","up_votes":1,"down_votes":0,"body":"For each roll, you'd normally want to use either a binomial or hypergeometric distribution to model the odds of finding 1, 2, 3, etc.  Then to model the number of rolls until you succeed, you would want to use a geometric distribution using the value found in the individual roll as the probability of success.\n\nHowever, there are a bunch of pitfalls to this, for us as outside observers.  We don't actually know how they have modified their equations.  For example, on a particular roll, what value for the chance of a success would we use?  That depends on if the chance of success is stable, or diminishing, within the single roll (with or without replacement).  If it's stable, then it would be calculated with a binomial, similar to flipping 5 coins but with a success of whatever the champ probability is.  If diminishing, we have to use a hypergeometric.  That depends entirely on how the code is written.\n\nThen we also don't know if numbers are updated in real time as we roll, or if they are \"locked\" at some moment, like the start of a round.  The latter would certainly be better for computing speeds.\n\nThat's not even mentioning if they use seeding for the pools a player has, which at times seems the case, because certain champs, even high tier, seem to appear in multiples more than would be expected - ie. I frequently see two of the same tier 5 before seeing two different ones.\n\nSo ultimately, given our lack of info, these calculations are rather pointless.","replies":[]}]}