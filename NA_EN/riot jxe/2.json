{"poster":"Riot JxE","date":"2017-07-29T02:52:58.022+0000","title":"FPS/Performance Updates","subforum":"Gameplay","up_votes":136,"down_votes":1,"body":"Hey all!\r\n\r\nRiot JxE, Product Manager of our Render Team, here to talk with you all about the FPS issues in late-game teamfights you&#039;ve been bringing up for the last few months. We&#039;ve been digging into it for a few months now and tl;dr is it&#039;s been a pain in the ass to track down. We had been using Avg FPS to track how performance is doing and that wasn&#039;t enough data to track down this issue. We&#039;ve been putting in [better tracking code](http://i.imgur.com/R6MXnMI.jpg) and using that data to help better understand what&#039;s causing the issues. (note that the numbers you see in this image are on a developer debug build and not indicative of every machine)\r\n\r\nAll of that being said, we&#039;ve found some good culprits and have started optimizing the code. We believe some CPU operations have been stalling the GPU which has been causing the FPS issues you&#039;ve all been seeing in late game teamfights. Specifically, we&#039;ve optimized a function called UpdatePerceptionBubbles() that is used to build the Fog of War and have done some optimizations to audio during our particle simulate phase that we believe were the culprits. We&#039;re also going to be looking into other areas of optimization (like GameWorldLoop) now that we have better data.\r\n\r\nI can&#039;t promise anything yet, but just wanted to let you all know that we&#039;re actively looking into the issue and hope to have a fix soon. Thanks for bearing with us while we figure out what&#039;s going on.","replies":[{"poster":"LostFr0st","date":"2017-07-29T03:18:34.668+0000","up_votes":74,"down_votes":0,"body":"Thank you for the update and for all of your team's hard work.","replies":[{"poster":"Riot JxE","date":"2017-07-29T06:49:10.736+0000","up_votes":53,"down_votes":1,"body":"<3","replies":[{"poster":"Guster Posey","date":"2017-07-29T09:45:47.991+0000","up_votes":4,"down_votes":0,"body":"Thank you for looking into this! It's been a steady decline in FPS since essentially Season 5 for me. I have a 144hz monitor, and lately I've been running it at 120hz because that seems to be all the FPS I'm able to get (I've been running a 4790k with a GTX 1070, just recently upgraded to a Ryzen 7 1700 with the same GPU) and it's amazing if I'm able to keep over 120 throughout the course of the game past around 5 minutes in.\n\nSo please have a look at the entirety of the game, not just late game!","replies":[{"poster":"rtbf225618241","date":"2017-07-29T12:52:38.565+0000","up_votes":9,"down_votes":0,"body":"Below 120 is bad for you? Dude, i'm happy if it stays at 60 and used to play on 15 on my previous computer.\n\nJust saying..","replies":[{"poster":"Bhagswag","date":"2017-07-29T13:41:04.347+0000","up_votes":5,"down_votes":0,"body":"Yeah but you didn't pay as much as he did for his PC lol. He should be getting far more FPS at that price point.","replies":[{"poster":"rtbf225618241","date":"2017-07-29T17:10:36.334+0000","up_votes":4,"down_votes":0,"body":"Fair enough then but it's still totally playable without issues.","replies":[{"poster":"Hi Im Myst","date":"2017-07-30T00:28:29.583+0000","up_votes":2,"down_votes":0,"body":"The problem isn't that the game is unplayable at that 120 fps, because it is way more than playable. The problem is he isn't getting the performance from his machine that he should be getting due to faulty code. Being unable to have the most enjoyable experience due to faulty code is an issue that should be high on priority for things to fix.","replies":[{"poster":"rtbf225618241","date":"2017-07-30T01:44:48.055+0000","up_votes":2,"down_votes":0,"body":"I get that. I'm just saying that it doesn't actually impact the experience at all until it reaches a severe low point. Ofcourse it has to be looked at.","replies":[{"poster":"Deez Crits","date":"2017-07-30T18:08:51.052+0000","up_votes":1,"down_votes":0,"body":"No one said anything about how his gameplay (I'm assuming that's what you are implying by \"experience\") was affected. He just wants his full dollars worth for the setup he has performance-wise. You're continuously making a point that is irrelevant to the subject that was originally mentioned.","replies":[{"poster":"rtbf225618241","date":"2017-07-30T21:21:21.818+0000","up_votes":2,"down_votes":1,"body":"It's not irrelevant given he didn't specify why he was complaining. If you want to haystring grammar because i didn't assume he was a needy player, then go fucking ahead. I don't care. You're just being annoying at this point.\n\nI also replied to others saying i'm totally fine with that. I just pointed out at least his fps drop isn't visible to the eye yet so it would take some time untill this becomes a serious problem.","replies":[{"poster":"Deez Crits","date":"2017-07-31T00:16:51.606+0000","up_votes":1,"down_votes":0,"body":"What was the original issue here if you're \"totally fine with it\"? You seem to understand his concerns; I'm just saying that you're really up in arms about nothing. But go ahead and have another heated reply. I made the original comment because I was annoyed reading the same thing over and over.","replies":[{"poster":"rtbf225618241","date":"2017-07-31T11:19:04.022+0000","up_votes":1,"down_votes":1,"body":"Why do you think i have an issue with the original comment? I just said at least it isn't that bad yet. Some people like to exaggerate, like you.","replies":[{"poster":"Deez Crits","date":"2017-07-31T15:17:18.119+0000","up_votes":1,"down_votes":0,"body":"> Below 120 is bad for you? Dude, i'm happy if it stays at 60 and used to play on 15 on my previous computer.\n> \n> Just saying..\n\nI'm done here, I rest my case mate.\n\nAnd also\n\n> Fair enough then but it's still totally playable without issues.\n\nWhen it was never a matter of playability in the first place.","replies":[{"poster":"Deez Crits","date":"2017-08-16T07:23:12.002+0000","up_votes":1,"down_votes":0,"body":"What was the point of mentioning playability then? The topic is related to playability but playability is not within the current context.\n\nAnd also \"Just saying\" doesn't necessarily make a message light in tone.  Look at how defensive you are when you respond; your attitude doesn't help you.  Have you heard of the disclaimer \"No offense\"?","replies":[]}]}]}]}]}]}]}]}]}]},{"poster":"ahri thighs","date":"2017-07-29T14:45:30.193+0000","up_votes":1,"down_votes":4,"body":"***","replies":[{"poster":"rtbf225618241","date":"2017-07-29T17:11:18.586+0000","up_votes":4,"down_votes":0,"body":"My point was that it's not an issue or anything that you have less than 120. Beneath 60 is where visible lag comes in.\n\nThis has nothing to do with your SJW point you just made.","replies":[]}]},{"poster":"pinkbunnyhunter","date":"2017-08-04T03:20:56.328+0000","up_votes":1,"down_votes":0,"body":"Hmm. I used to play league on an \n\nATI x800pro\nAmd Athlon 3200+ 64 bit\nWindows XP 64 bit\n4Gb ram\nwith SOLID 75fps and I liked the older graphics much better. \n\nI even managed to stream it at 35 fps. Competitive games are meant to be smooth and non-graphically intensive.\n\nThe loading time was a pita, i can't tell why they can't just load the game once in client and not have to reload each time. Usually i would read a page during a load, or make myself a coffee. People were hating on me for having a potato, but i bought that potato in 2003 and it just never broke.","replies":[{"poster":"rtbf225618241","date":"2017-08-04T10:53:53.058+0000","up_votes":1,"down_votes":0,"body":"Your processor made up for your computer's age and i don't think you know how loading works because it's different every time. No game is the same and it has to synchronize between all the people so everyone sees the same thing.","replies":[]}]}]}]}]}]},{"poster":"Evil Yasuo","date":"2017-07-29T03:16:08.865+0000","up_votes":9,"down_votes":0,"body":"Nice! I've been getting really bad frame issues (20fps and it drops to 4fps in teamfights) and really bad ping (which might actually be bad internet connection)\nI'm from phoenix, az so a computer heating up in this 120 degree weather isn't the best thing.","replies":[{"poster":"Riot JxE","date":"2017-07-29T06:53:39.223+0000","up_votes":18,"down_votes":1,"body":"You should team up with the buttered potato and pizza cooking players down below","replies":[{"poster":"Evil Yasuo","date":"2017-07-29T07:29:44.834+0000","up_votes":2,"down_votes":0,"body":"I'm too good for those scrubs. Did you not know i'm the #1 Talon player in the world?","replies":[{"poster":"The Ender Cobra","date":"2017-07-29T15:05:35.323+0000","up_votes":6,"down_votes":0,"body":"Did you know that Talon is responsible for 25% of first bloods?","replies":[{"poster":"Yadid","date":"2017-07-29T16:54:19.894+0000","up_votes":4,"down_votes":0,"body":"Smell that boys? That's some good meme smell.","replies":[]}]}]}]},{"poster":"PaladinNO","date":"2017-07-29T11:16:46.903+0000","up_votes":4,"down_votes":1,"body":">120 degree weather\n\nPresuming that's a Fahrenheit measurement. :P\n\nOn a serious note, if you're on a desktop PC, changing the fans (if you use the ones that came pre-installed in the case - which are usually mediocre) with high-quality ones should help.\n\nPersonally, I'm very partial to the Noctua IPPC fans.\nhttp://noctua.at/en/products/product-line-industrial\n\nCorsair Premium/Pro is another type of fans I'd be looking at, if I were in the market.\n_[My own setup](https://boards.eune.leagueoflegends.com/en/c/off-topic-en/fQOqgEgz-show-your-set-up?comment=0001) is ~27dB fans with a manual, rheostat fan controller (Sunbeam Rheobus Extreme). Gives for (cooling)power when I need it, and quiet when I want it._\n\nAlso, the fan setup is important. In terms of thermodynamics 101, you want intake fans in the bottom front, and exhaust fans at the top rear end of the case (cold air drops; warm air rises). And more fans, in the right setup, equals better. \n\nNoise-wise, a maximum of 25 dB (Decibel) - personal preference; may be individual (lower is better, but sub ~19 dB, and the fans will be start to get too weak to do the job properly) - and your ears will be kept pleased.\n\nA negative pressure inside the case provides the best cooling (more air being pushed out of the case than the amount entering it), but it'll be filled with dust in no time (filters or not, trust me).\nA positive pressure makes the PC (component cores) a bit hotter, up to ~5°C (~41°F, if I'm reading it right) based on own tests, but keeps most of the dust out.\n\nKeeping the PC raised off the ground by 20-30 cm (put on a stand or something) and above the floor where most of the dust is at, and with a negative pressure inside it, should give for the best combination.\nYou should also strive to keep your PC (fans/cooling fins) free of dust. Using short burts of canned air to give it a \"good blow\" once in a while (2-4 times a year) is a good thing. \n_No vacuum cleaner, as it brings static electricity, which may fry your PC components! And use a compressor only if you know what you're doing._","replies":[]}]},{"poster":"Mysticman89","date":"2017-07-29T02:58:17.664+0000","up_votes":12,"down_votes":0,"body":"I'll be thrilled if I take off the fps cap and can crack 1k FPS for the sheer silliness of it.","replies":[{"poster":"PaladinNO","date":"2017-07-29T11:01:10.597+0000","up_votes":3,"down_votes":0,"body":"1004 FPS on screenshot already.\n\n{{sticker:slayer-pantheon-thumbs}} \n\nhttps://1drv.ms/i/s!AuFMZD__7mN2gUhncGyQlydw755o\n_Highest graphics settings, but otherwise the equivalent of a laboratory test, I will have to admit._","replies":[{"poster":"Firestorm","date":"2017-07-29T12:15:13.230+0000","up_votes":3,"down_votes":0,"body":"On what kind of a processor was that achieved?\ninb4 6GHz 7700k under liquid nitrogen","replies":[]}]}]},{"poster":"LyingOnLine","date":"2017-07-29T02:54:45.464+0000","up_votes":8,"down_votes":0,"body":"Thanks very much guys. Now I won't have to butter my potato when it overheats anymore!","replies":[{"poster":"rework trundle","date":"2017-07-29T03:01:45.044+0000","up_votes":7,"down_votes":0,"body":"I cooked pizza on mine","replies":[{"poster":"PaladinNO","date":"2017-07-29T11:56:22.314+0000","up_votes":3,"down_votes":0,"body":"I once tried roasting a duck on mine: The duck stayed alive...and asked for a warm blanket. :/","replies":[]}]}]},{"poster":"KennysDreamGirl","date":"2017-07-29T06:29:37.015+0000","up_votes":5,"down_votes":16,"body":"I wish the balance team could do as good a job as you guys do","replies":[{"poster":"Riot JxE","date":"2017-07-29T06:51:17.710+0000","up_votes":17,"down_votes":3,"body":"It's not that simple. Similar to the balance team, this is going to be an iterative approach. The things we've found might fix the issues or it might not, but we'll keep at it until we fix it.","replies":[{"poster":"KennysDreamGirl","date":"2017-07-29T06:59:41.434+0000","up_votes":5,"down_votes":12,"body":"atleast what you guys do works and is healty. (sorry for the saltiness but I'm not happy with the recent patches and lack of changes to things that need changed)","replies":[{"poster":"4th3t0s","date":"2017-07-29T08:12:34.513+0000","up_votes":10,"down_votes":0,"body":"Not being happy with something doesn't automatically make it wrong","replies":[{"poster":"KennysDreamGirl","date":"2017-07-29T08:57:26.784+0000","up_votes":2,"down_votes":6,"body":"well when someone like kha and vayne can get up 300 free damage 3  an auto( and able to et that free damage 3-6 times) just by going invis for 1 sec with no cd on that bonus damage I would say is a little wrong.\n\nand that's just one thing here","replies":[{"poster":"4th3t0s","date":"2017-07-29T09:40:28.430+0000","up_votes":6,"down_votes":0,"body":"Ok, season 2 metagolem, release xin/yorick, feral flare, devourer warwick, league of {{item:3071}}s, 7.2 lethality buffs, AP {{champion:11}}, cinderhulk {{champion:113}}, AP {{champion:78}}, AP {{champion:18}}, permabanned {{champion:38}}.  The list is endless if you cherrypick every balance problem the game has had over the years; it's theoretically impossible to make a perfectly balanced game, let alone trying to define perfection.  Be happy with what you have; I'm personally amazed the game has maintained the level of current balance, considering the chamption roster has more than doubled(?) since then.","replies":[]}]}]}]},{"poster":"Pika310","date":"2017-11-17T07:33:20.855+0000","up_votes":1,"down_votes":0,"body":"What we mean is: you're trying to fix problems.\n\nThe balance team intentionally creates a state of imbalance, Ghostcrawler himself just stated this directly to us not more than 3 days ago.  They intentionally create \"bronze champions,\" either by way of rework, failed design or nerfs.  They intentionally create a game where specific champions (balance team favorites) can flourish, whilst actively hammering down others (balance team's hated.)\n\nThis is truer for none more-so than Meddler especially, who's been especially active in gutting champions he hates.  Which just also happen to all be female champions...  I'm not calling Meddler a misogynist, but... actually that's exactly what I'm calling him.","replies":[]}]}]},{"poster":"aspects1","date":"2017-07-29T08:58:39.212+0000","up_votes":9,"down_votes":2,"body":"riot's actually trying to fix a problem\nhttp://imgur.com/gallery/WrKPhfd","replies":[]},{"poster":"Linna Excel","date":"2017-07-29T03:08:03.400+0000","up_votes":1,"down_votes":0,"body":"Does the tracking code produce any noticeable performance hits by itself?","replies":[{"poster":"Riot JxE","date":"2017-07-29T06:52:52.656+0000","up_votes":6,"down_votes":1,"body":"The code in the image I showed does have a slight impact but we only run it on our debug builds. The data we get from live games has a trivial impact. It's just an extra line of code logging stuff.","replies":[]}]},{"poster":"Spice POWAH","date":"2017-07-29T05:09:34.401+0000","up_votes":6,"down_votes":1,"body":"I see a thumbnail In the post but I can't see the actual picture in the post. Not too important, but i'm curious now D:","replies":[]},{"poster":"PaladinNO","date":"2017-07-29T10:29:37.140+0000","up_votes":3,"down_votes":0,"body":"My i7 3770K, 32 GB RAM, 3 dedicated SSDs and GTX 1080 FTW is ready to take some more FPS home!\n\n>http://i.imgur.com/R6MXnMI.jpg\n\nAnd when that happens, I'll trade you some FPS for that ping.\n\nhttps://1drv.ms/i/s!AuFMZD__7mN2gUhncGyQlydw755o\n\n{{sticker:slayer-pantheon-thumbs}}\n\n>developer debug build\n\n\"[RELEASEDBG_WITH_CHEATS]\" {{item:3682}} \n\nLovin' it! xD","replies":[]},{"poster":"Jonxx","date":"2017-07-29T04:40:38.394+0000","up_votes":3,"down_votes":0,"body":"Thanks, love the transparency.","replies":[]},{"poster":"AkhriPasta","date":"2017-07-29T09:04:53.829+0000","up_votes":1,"down_votes":0,"body":"I also get Packet loss in teamfights....","replies":[]},{"poster":"House x33","date":"2017-07-30T10:14:05.671+0000","up_votes":1,"down_votes":0,"body":"You might want to take a look into minions spawn as well. My game starts with 200+ FPS but drops to below 80 as soon as minions spawn. Also GPU is being forced to run at only 15% power.","replies":[{"poster":"PaladinNO","date":"2017-07-30T19:21:02.493+0000","up_votes":1,"down_votes":0,"body":"Why is your GPU forced to run at only 15% power? That sounds like a heating issue to me.\n\nDo a temp check with RealTemp:\nhttps://www.techpowerup.com/realtemp/","replies":[{"poster":"VasilisGreen","date":"2017-07-30T19:52:30.655+0000","up_votes":1,"down_votes":0,"body":"Or a severe CPU bottleneck... Thermal throttling isn't that easy to trigger, especialy on a Graphics Card, he'd have to lower the fan curve and overclock it to actualy hit a thermal throttle...\n\nFor example, if he paired an old pentium 3 with a GTX 1080ti, he should have expected this, you can't just do that.","replies":[{"poster":"PaladinNO","date":"2017-07-30T20:16:02.110+0000","up_votes":1,"down_votes":0,"body":"Aye, under normal circumstances, thermal throttling shouldn't happen...unless the fans are clogged with dust, or barely runs at all due to dried up lubrications (that has happened to me and my previous Asus GTX 780 OC - 1 fan ran at ~20%, the other at 100% to try to compensate).\n\nAlso, if it's laptop, the GPU can be denied to run on full power due to restrictions in the Power Settings. Ofc., only 15% sounds a bit...off, even with a manual override.\n\nAs for GPU fan profile, I've been dabbling a bit with that myself, and set up a rather aggressive profile on my [GTX 1080](http://www.evga.com/Products/Product.aspx?pn=08G-P4-6286-KR) (using MSI Afterburner):\n0-45°C = 0 %\n45-60°C = 40 %\n60-70°C = 60 %\n70-100°C = 100 %\n\n_Don't even reach 70°C on the GPU if not playing Doom 4 (max for this session - 41 days - has been 68°C). And when the PC idles, the GPU fans don't even turn._\n\nI am a little paranoid when it comes to heat, so I have even reduced TJ Max from 105 to 95 on my CPU - so should it ever get to that, for whatever reason, the PC will cut its own power before any component damage occur.\n\nNot that I am actually worried that will ever happen - did a 7+ hour burn-test on my CPU, and the highest it got was 78°C ([air cooled](http://thermalright.com/product/true-black-rev-c/), [2 fan push/pull](http://www.frozencpu.com/products/10212/fan-656/Noiseblocker_NB-BlackSilentPro_PL-2_120mm_x_25mm_Ultra_Quiet_Fan_-_1400_RPM_-_20_dBA.html) setup).\n\nWell, we'll see what _House x33_ says, and if he's interested in listing his/her hardware specifications.","replies":[{"poster":"VasilisGreen","date":"2017-07-30T20:23:22.114+0000","up_votes":1,"down_votes":0,"body":"> [{quoted}](name=PaladinNO,realm=EUNE,application-id=3ErqAdtq,discussion-id=9oAyWOcr,comment-id=002b000000000000,timestamp=2017-07-30T20:16:02.110+0000)\n>\n>  barely runs at all due to dried up lubrications \n\n\nAbout that, have you tried the new ML fans from corsair? they're supposed to not have ball bearings and stuff, and i wanted an actual user opinion.\n\nAnyway, yeah, like, how could he manage a 15% under load? what kind of throttle would do that? Thermal throttle can go all the way down to single digits but still, 15% it's an odd number. If you throttle that hard, you can't play for more than 5 mins before the GPU starts smoking, you'll brick the card... And since he's saying he's playing like that, that's an extended period of time, so, how does he do that without having the card explode? It can't be thermal, it would destroy the card, although the card might actualy shut down.\n\nSo, something's really off.","replies":[]}]}]}]}]}]}