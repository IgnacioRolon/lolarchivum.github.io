{"poster":"Mindstar","date":"2014-11-04T03:38:10.355+0000","title":"OCE Network Diagnostics Tool","subforum":"Announcements","up_votes":2,"down_votes":0,"body":"Summoners,\n\nWe have been collecting data from the Network Diagnostic Tool thread, and I wanted to share what we have learned so far. Thank you to the 200+ summoners that have submitted a report.\n\nThe data helped us identify various areas we can improve the quality of service for you.\n\nThe most reported issue (27%) is related to the firewall issue after champ select, and 87% of those issues were players using TPG as their Internet Service provider (ISP).\n\nThis isn’t to say we aren’t looking at players on other ISPs, but this was the most prominent to start with. We were also able to identify a large portion of players that were having lag issues and we have looked further into why that is occurring.\n\nBased on feedback and the reports we have analyzed from the first tool, we have made improvements and implemented Version 2.0 (http://oce.leagueoflegends.com/tools/network-logs ).\n\n**Here is a deeper dive into some of the data:**\n\n* Approximately 27% of all submissions were related to firewall issues after champion select and from that 27%, 87% were all related to players on TPG.\n* A further 27% of the total reports received were related to lag issues\n* The remaining 46% were for various issues such as disconnects, login errors, etc.\n\n**Firewall Error after Champ Select**\n\nWith a large amount of players reporting from the same ISP, the Live Services Team at Riot OCE are working with TPG to implement a solution we believe may resolve this issue. In saying that we do know things don’t always go to plan and work exactly as predicted so once everything is in place, we will be monitoring our proposed solution carefully to keep track of its success.\n\n**Lag related Issues**\n\nLag is an ongoing point of contention, with many online services, that we are continually working to improve. Throughout our analysis of your trace routes, we found some great information to assist you in further troubleshooting.\n\nFirstly I would like to give a little context into what a trace route is and what we are looking at.\n\n**What is a trace route and what should a normal trace look like?**\n\nI’m glad you asked!\n\nA trace route is a way to display the network path your internet connection takes when going from your computer to a particular server, for example League of Legends game servers. This tool also measures the delay, in milliseconds, that a packet takes to get to each cross road (or hop) in the path and back to your computer. The higher the time the longer it takes and as such the higher chance of lag.\n\nNow what does a normal trace route look like? Below is an example of a trace route with a normal route path. \n\n> Tracing route to 103.240.226.249 over a maximum of 30 hops\n> \n> 1 <1 ms <1 ms <1 ms router.belkin [192.168.2.1]\n> 2 13 ms 13 ms 12 ms syd-sot-ken2-bras4-lo-20.tpgi.com.au [10.20.22.74]\n> 3 13 ms 13 ms 13 ms 202-7-214-138.tpgi.com.au [202.7.214.138]\n> 4 17 ms 17 ms 15 ms 203-29-129-133.static.tpgi.com.au.129.29.203.in-addr.arpa [203.29.129.133]\n> 5 20 ms 15 ms 14 ms 59-100-203-73.syd.static-ipl.aapt.com.au [59.100.203.73]\n> 6 18 ms 17 ms 17 ms lag41.sglebinte01.aapt.net.au [202.10.14.199]\n> 7 * * * Request timed out.\n> 8 * * * Request timed out.\n> 9 * * * Request timed out.\n> 10 * * * Request timed out.\n> 11 * * * Request timed out.\n> 12 * * * Request timed out.\n> 13 * * * Request timed out.\n> 14 * * * Request timed out.\n> 15 * * * Request timed out.\n> 16 * * * Request timed out.\n\nThe “Request timed out” does not necessarily mean there is an issue; it simply means the routes at each of those hops is setup not to respond to your request.\n\nThe first hop in this trace is the connection from your computer to your home router. This should be less than 1ms (<1ms). From the second hop onwards you are (generally) out on the internet, so the time it takes will increase a little. As you can see by the information above we are hovering around the 13ms mark for each hop, reaching a maximum of 18ms in hop number 6.\nThis trace route is great and the player should have no issues regarding lag.\n\nSo what does an abnormal trace route look like?\n\nWell to be honest it will look very similar with the exception of some of the hop times.\nFor example:\n\n> Tracing route to 103.240.226.249 over a maximum of 30 hops\n> \n> 1 1 ms 1 ms 2 ms BoB.iiNet [10.1.1.1]\n> 2 359 ms 362 ms 362 ms nexthop.wa.iinet.net.au [203.215.5.243]\n> 3 455 ms 420 ms 458 ms ae7.cr1.per1.on.ii.net [150.101.33.120]\n> 4 434 ms 420 ms 469 ms ae1.cr1.adl6.on.ii.net [150.101.33.36]\n> 5 420 ms 472 ms 439 ms ae4.br1.syd7.on.ii.net [150.101.33.34]\n> 6 445 ms 498 ms 479 ms ae0.br1.syd4.on.ii.net [150.101.33.14]\n> 7 * * * Request timed out.\n> 8 * * * Request timed out.\n\nAs you can see from the trace route above the first hop looks fine, less than 1ms to the route. Awesome! However once we get to the internet we start to see some issues. Hop 2, shows a large increase in time, 359ms and it just goes up from there.\n\nWhat does this actually mean? To be straight up front, it means the time it takes a packet of data to go from your router to the ISPs first connection (or hop) for you is a long time, which is not good, especially when you’re trying to play games.\n\nAnother example:\n\nTracing route to 103.240.226.249 over a maximum of 30 hops\n\n1 7 ms 99 ms 98 ms BigPond.BigPond [10.0.0.138]\n2 198 ms 32 ms 30 ms 172.18.212.5\n3 892 ms 720 ms 710 ms 172.18.69.117\n4 28 ms 29 ms 30 ms 172.18.117.161\n5 28 ms 35 ms 29 ms 172.18.117.170\n6 29 ms 30 ms 30 ms bundle-ether4.cha-edge901.brisbane.telstra.net [203.50.44.40]\n7 30 ms 30 ms 32 ms bundle-ether6.cha-core4.brisbane.telstra.net [203.50.11.140]\n8 398 ms 184 ms 47 ms bundle-ether11.ken-core10.sydney.telstra.net [203.50.11.72]\n9 42 ms 48 ms 47 ms bundle-ether1.ken-edge902.sydney.telstra.net [203.50.11.97]\n11 46 ms 46 ms 46 ms ten-1-0-0.bdr03.syd04.nsw.VOCUS.net.au [175.45.72.73]\n\nWhen you look closer you will see the very first hop from the computer to the internal router is nearly 100ms. This is an extremely long time to go from your computer to your router.\n\nNow that we have a general idea of what a trace route is and what we are looking for I wanted to share some statics we found from the reports we received and a quick check list you can do to help diagnose the problem.\n* Refresher on the stats - 27% of all the reports we received were related to players getting lag.\n\n* Of that 27%, 56% of the reports are players getting high latency from their computer to their own router, before they even got to the internet. (The example just above this)\n* The remaining 44% can be broken down to various ISP and server related issues.\n* What can you do to help diagnose where the problem is?\n* So we have a few quick little tasks you can do to help find where your issue lies.\n* Make sure you don’t have any downloads or uploads running. This uses part of your allocated bandwidth and as such congests your connection.\n* Restart your computer and router. At times both of these devices can get overloaded and just need to be cleared up.\n* Complete a trace route to 103.240.226.249 and take a look at the time it takes for your data to reach:\n* Your router - If this is high you have something causing high connection times inside your home network.\n* The different hops in the route path – High hop times could indicate the route your connection is take could be experiencing issues. This could be an ISP related problem or a bad path.\n* If you are using wifi - connect with a cable to see if this improves the situation\n* Disable any proxy or VPN service you may be using.\n\nNow that all the technical information is out of the way, I wanted to thank everyone that has reported an issue using the Network Diagnostic Tool. All the information provided has helped us identify constant points of pain and work towards solutions.\n\nWith that being said I am taking this opportunity to close down version 1 of our tool. It was a good, simple little form but in all honesty it could be better.\n\nWe are now using an updated version here: [Network Diagnostic Tool 2.0](http://oce.leagueoflegends.com/tools/network-logs).\n\nThis new tool has a small group of questions to answer and a network diagnostic script (for PC and MAC) that will gather various pieces of information, in an effort to assist us in resolving your pain.\n\nWe love hearing your feedback, so please leave a comment below, ask questions and the Live Team will be around to help out.\n\n-ToxicHawk","replies":[]}